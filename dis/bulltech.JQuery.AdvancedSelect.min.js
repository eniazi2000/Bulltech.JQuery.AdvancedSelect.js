!function(i){var c,t,e,n,l,a,r,o=document.createElement("div");function d(){var s;null!=a&&(s=function a(s){var o=document.createElement("div");return i.each(s,function(s,t){var e=document.createElement("div"),n=document.createElement("i"),l=document.createElement("span");i(n).attr("class",c.arrowCloseCss),i(l).text(t.title),i(l).attr("index",t.id),i(e).attr("class",c.menuItemCssClass),i(e).append(l),0<t.childs.length?(c.onlySelectLastChild||i(l).click(function(s){i(r).val(i(this).text()),i(r).attr("selectedIndex",i(this).attr("index")),p(),console.log(i(this).text())}),i(n).click(function(){i(this).closest("."+c.menuItemCssClass).find("div").first().slideToggle(200),i(this).hasClass(c.arrowOpenCss)?i(this).removeClass(c.arrowOpenCss).addClass(c.arrowCloseCss):i(this).removeClass(c.arrowCloseCss).addClass(c.arrowOpenCss)}),i(e).append(n)):i(l).click(function(s){i(r).val(i(this).text()),i(r).attr("selectedIndex",i(this).attr("index")),p(),console.log(i(this).text())}),i(o).append(e),0<t.childs.length&&(t=a(t.childs),i(t).slideUp(10),i(e).append(t))}),o}(a),i(o).append(s),console.log(s))}function p(){i(o).css("display","none")}i.fn.doSelect=function(s){c=i.extend({onlySelectLastChild:!0,menuCssClass:"",menuItemCssClass:"",arrowCloseCss:"",arrowOpenCss:"",dataString:""},s),r=i(this);try{a=JSON.parse(c.dataString),console.log(a)}catch(s){a=null,console.log(s)}return n=parseInt(i(this).outerHeight(!0)),e=parseInt(i(this).outerWidth(!0)),t=i(this).position().top,l=i(this).position().left,i(this).focus(function(){i(o).css("display","block")}),i(o).css("top",t+n+"px"),i(o).css("left",l+"px"),i(o).css("position","absolute"),i(o).width(e),i(o).attr("class",c.menuCssClass),i(o).css("display","none"),d(),i("body").append(o),this}}(jQuery);